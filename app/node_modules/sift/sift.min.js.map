{"version":3,"sources":["webpack://sift/webpack/universalModuleDefinition","webpack://sift/webpack/bootstrap","webpack://sift/./src/index.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typeChecker","type","typeString","toString","isArray","isObject","isFunction","obj","or","validator","validateOptions","length","and","validate","valueOwner","options","defaultExpressions","$eq","test","$ne","$gt","$gte","$lt","$lte","$mod","$in","$nin","$not","$type","testType","$all","allOptions","$and","$size","sizeMatch","$or","orOptions","$nor","$regex","$where","$elemMatch","array","search","$exists","prepare","query","queryOwner","comparable","compare","RegExp","Function","Array","comparableValue","String","result","createRootValidator","indexOf","eq","map","parse","constructor","$options","createValidator","validatedNested","keyPath","child","values","findValues","current","keypath","index","push","k","isNaN","Number","first","inclusive","allValid","isValid","createNestedValidator","expressions","wrapQuery","toJSON","parseQuery","validators","queryValue","expression","charCodeAt","Error","keyParts","split","parseNested","getAllKeys","keys","join","isEqual","a","b","select","sift","assign","Date","getTime"],"mappings":"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","file":"sift.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sift\"] = factory();\n\telse\n\t\troot[\"sift\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*\n *\n * Copryright 2018, Craig Condon\n * Licensed under MIT\n *\n * Filter JavaScript objects with mongodb queries\n */\n\nfunction typeChecker(type) {\n  var typeString = \"[object \" + type + \"]\";\n  return function(value) {\n    return Object.prototype.toString.call(value) === typeString;\n  };\n}\n\n/**\n */\n\nvar isArray = typeChecker(\"Array\");\nvar isObject = typeChecker(\"Object\");\nvar isFunction = typeChecker(\"Function\");\n\nfunction get(obj, key) {\n  return isFunction(obj.get) ? obj.get(key) : obj[key];\n}\n\n/**\n */\n\nfunction or(validator) {\n  return function(validateOptions, value) {\n    if (!isArray(value) || !value.length) {\n      return validator(validateOptions, value);\n    }\n    for (var i = 0, n = value.length; i < n; i++) {\n      if (validator(validateOptions, get(value, i))) return true;\n    }\n    return false;\n  };\n}\n\n/**\n */\n\nfunction and(validator) {\n  return function(validateOptions, value) {\n    if (!isArray(value) || !value.length) {\n      return validator(validateOptions, value);\n    }\n    for (var i = 0, n = value.length; i < n; i++) {\n      if (!validator(validateOptions, get(value, i))) return false;\n    }\n    return true;\n  };\n}\n\nfunction validate(validator, value, key, valueOwner) {\n  return validator.validate(validator.options, value, key, valueOwner);\n}\n\nvar defaultExpressions = {\n  /**\n   */\n\n  $eq: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $ne: and(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $gt: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $gte: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $lt: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $lte: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $mod: or(function(test, value) {\n    return test(value);\n  }),\n\n  /**\n   */\n\n  $in(test, value) {\n    return test(value);\n  },\n\n  /**\n   */\n\n  $nin: function(test, value) {\n    return test(value);\n  },\n\n  /**\n   */\n\n  $not: function(test, value, key, valueOwner) {\n    return test(value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $type: function(testType, value) {\n    return testType(value);\n  },\n\n  /**\n   */\n\n  $all: function(allOptions, value, key, valueOwner) {\n    return defaultExpressions.$and(allOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $size: function(sizeMatch, value) {\n    return value ? sizeMatch === value.length : false;\n  },\n\n  /**\n   */\n\n  $or: function(orOptions, value, key, valueOwner) {\n    for (var i = 0, n = orOptions.length; i < n; i++) {\n      if (validate(get(orOptions, i), value, key, valueOwner)) {\n        return true;\n      }\n    }\n    return false;\n  },\n\n  /**\n   */\n\n  $nor: function(validateOptions, value, key, valueOwner) {\n    return !defaultExpressions.$or(validateOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $and: function(validateOptions, value, key, valueOwner) {\n    for (var i = 0, n = validateOptions.length; i < n; i++) {\n      if (!validate(get(validateOptions, i), value, key, valueOwner)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\n   */\n\n  $regex: or(function(validateOptions, value) {\n    return typeof value === \"string\" && validateOptions.test(value);\n  }),\n\n  /**\n   */\n\n  $where: function(validateOptions, value, key, valueOwner) {\n    return validateOptions.call(value, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $elemMatch: function(validateOptions, value, key, valueOwner) {\n    if (isArray(value)) {\n      return !!~search(value, validateOptions);\n    }\n    return validate(validateOptions, value, key, valueOwner);\n  },\n\n  /**\n   */\n\n  $exists: function(validateOptions, value, key, valueOwner) {\n    return valueOwner.hasOwnProperty(key) === validateOptions;\n  }\n};\n\n/**\n */\n\nvar prepare = {\n  /**\n   */\n\n  $eq: function(query, queryOwner, { comparable, compare }) {\n    if (query instanceof RegExp) {\n      return or(function(value) {\n        return typeof value === \"string\" && query.test(value);\n      });\n    } else if (query instanceof Function) {\n      return or(query);\n    } else if (isArray(query) && !query.length) {\n      // Special case of a == []\n      return or(function(value) {\n        return isArray(value) && !value.length;\n      });\n    } else if (query === null) {\n      return or(function(value) {\n        //will match both null and undefined\n        return value == null;\n      });\n    }\n\n    return or(function(value) {\n      return compare(comparable(value), comparable(query)) === 0;\n    });\n  },\n\n  $gt: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) > 0;\n    };\n  },\n\n  $gte: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) >= 0;\n    };\n  },\n\n  $lt: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) < 0;\n    };\n  },\n  $lte: function(query, queryOwner, { comparable, compare }) {\n    return function(value) {\n      return compare(comparable(value), comparable(query)) <= 0;\n    };\n  },\n\n  $in: function(query, queryOwner, options) {\n    const { comparable } = options;\n    return function(value) {\n      if (value instanceof Array) {\n        for (var i = value.length; i--; ) {\n          if (~query.indexOf(comparable(get(value, i)))) {\n            return true;\n          }\n        }\n      } else {\n        var comparableValue = comparable(value);\n        if (comparableValue === value && typeof value === \"object\") {\n          for (var i = query.length; i--; ) {\n            if (\n              String(query[i]) === String(value) &&\n              String(value) !== \"[object Object]\"\n            ) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles documents that are undefined, whilst also\n          having a 'null' element in the parameters to $in.\n        */\n        if (typeof comparableValue == \"undefined\") {\n          for (var i = query.length; i--; ) {\n            if (query[i] == null) {\n              return true;\n            }\n          }\n        }\n\n        /*\n          Handles the case of {'field': {$in: [/regexp1/, /regexp2/, ...]}}\n        */\n        for (var i = query.length; i--; ) {\n          var validator = createRootValidator(get(query, i), options);\n          var result = validate(validator, comparableValue, i, query);\n          if (\n            result &&\n            String(result) !== \"[object Object]\" &&\n            String(comparableValue) !== \"[object Object]\"\n          ) {\n            return true;\n          }\n        }\n\n        return !!~query.indexOf(comparableValue);\n      }\n\n      return false;\n    };\n  },\n\n  $nin: function(query, queryOwner, options) {\n    const eq = prepare.$in(query, queryOwner, options);\n    return function(validateOptions, value, key, valueOwner) {\n      return !eq(validateOptions, value, key, valueOwner);\n    };\n  },\n\n  $mod: function(query) {\n    return function(value) {\n      return value % query[0] == query[1];\n    };\n  },\n\n  /**\n   */\n\n  $ne: function(query, queryOwner, options) {\n    const eq = prepare.$eq(query, queryOwner, options);\n    return and(function(validateOptions, value, key, valueOwner) {\n      return !eq(validateOptions, value, key, valueOwner);\n    });\n  },\n\n  /**\n   */\n\n  $and: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $all: function(query, queryOwner, options) {\n    return prepare.$and(query, queryOwner, options);\n  },\n\n  /**\n   */\n\n  $or: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $nor: function(query, queryOwner, options) {\n    return query.map(parse(options));\n  },\n\n  /**\n   */\n\n  $not: function(query, queryOwner, options) {\n    const validateOptions = parse(options)(query);\n    return function(value, key, valueOwner) {\n      return !validate(validateOptions, value, key, valueOwner);\n    };\n  },\n\n  $type: function(query) {\n    return function(value, key, valueOwner) {\n      return value != void 0\n        ? value instanceof query || value.constructor == query\n        : false;\n    };\n  },\n\n  /**\n   */\n\n  $regex: function(query, queryOwner) {\n    return new RegExp(query, queryOwner.$options);\n  },\n\n  /**\n   */\n\n  $where(query) {\n    if (typeof query === \"function\") {\n      return query;\n    }\n\n    if (!process.env.CSP_ENABLED) {\n      return new Function(\"obj\", \"return \" + query);\n    }\n\n    throw new Error(\n      'In CSP mode, sift does not support strings in \"$where\" condition'\n    );\n  },\n\n  /**\n   */\n\n  $elemMatch: function(query, queryOwner, options) {\n    return parse(options)(query);\n  },\n\n  /**\n   */\n\n  $exists: function(query) {\n    return !!query;\n  }\n};\n\n/**\n */\n\nfunction search(array, validator) {\n  for (var i = 0; i < array.length; i++) {\n    var result = get(array, i);\n    if (validate(validator, get(array, i))) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n */\n\nfunction createValidator(options, validate) {\n  return { options, validate };\n}\n\n/**\n */\n\nfunction validatedNested({ keyPath, child, query }, value) {\n  var values = [];\n  findValues(value, keyPath, 0, value, values);\n\n  if (values.length === 1) {\n    var first = values[0];\n    return validate(child, first[0], first[1], first[2]);\n  }\n\n  // If the query contains $ne, need to test all elements ANDed together\n  var inclusive = query && typeof query.$ne !== \"undefined\";\n  var allValid = inclusive;\n  for (var i = 0; i < values.length; i++) {\n    var result = values[i];\n    var isValid = validate(child, result[0], result[1], result[2]);\n    if (inclusive) {\n      allValid &= isValid;\n    } else {\n      allValid |= isValid;\n    }\n  }\n  return allValid;\n}\n\n/**\n */\n\nfunction findValues(current, keypath, index, object, values) {\n  if (index === keypath.length || current == void 0) {\n    values.push([current, keypath[index - 1], object]);\n    return;\n  }\n\n  var k = get(keypath, index);\n\n  // ensure that if current is an array, that the current key\n  // is NOT an array index. This sort of thing needs to work:\n  // sift({'foo.0':42}, [{foo: [42]}]);\n  if (isArray(current) && isNaN(Number(k))) {\n    for (var i = 0, n = current.length; i < n; i++) {\n      findValues(get(current, i), keypath, index, current, values);\n    }\n  } else {\n    findValues(get(current, k), keypath, index + 1, current, values);\n  }\n}\n\n/**\n */\n\nfunction createNestedValidator(keyPath, child, query) {\n  return createValidator({ keyPath, child, query }, validatedNested);\n}\n\n/**\n * flatten the query\n */\n\nfunction isVanillaObject(value) {\n  return (\n    value &&\n    (value.constructor === Object ||\n      value.constructor === Array ||\n      value.constructor.toString() === \"function Object() { [native code] }\" ||\n      value.constructor.toString() === \"function Array() { [native code] }\") &&\n    !value.toJSON\n  );\n}\n\nfunction parse(options) {\n  const { comparable, expressions } = options;\n  var wrapQuery = function(query) {\n    if (!query || !isVanillaObject(query)) {\n      query = { $eq: query };\n    }\n    return query;\n  };\n\n  var parseQuery = function(query) {\n    query = comparable(query);\n\n    var validators = [];\n\n    for (var key in query) {\n      var queryValue = query[key];\n\n      if (key === \"$options\") {\n        continue;\n      }\n\n      var expression =\n        defaultExpressions[key] || (options && expressions && expressions[key]);\n\n      if (expression) {\n        if (prepare[key]) {\n          queryValue = prepare[key](queryValue, query, options);\n        }\n        validators.push(createValidator(comparable(queryValue), expression));\n      } else {\n        if (key.charCodeAt(0) === 36) {\n          throw new Error(\"Unknown operation \" + key);\n        }\n\n        var keyParts = key.split(\".\");\n\n        validators.push(\n          createNestedValidator(keyParts, parseNested(queryValue), queryValue)\n        );\n      }\n    }\n\n    return validators.length === 1\n      ? validators[0]\n      : createValidator(validators, defaultExpressions.$and);\n  };\n\n  var parseNested = function(query) {\n    query = wrapQuery(query);\n    if (isExactObject(query)) {\n      return createValidator(query, isEqual);\n    }\n    return parseQuery(query);\n  };\n\n  var parseRoot = function(query) {\n    return parseQuery(wrapQuery(query));\n  };\n\n  return parseRoot;\n}\n\nfunction isEqual(a, b) {\n  if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n    return false;\n  }\n\n  if (isObject(a)) {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n      return false;\n    }\n\n    for (var key in a) {\n      if (!isEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else if (isArray(a)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (var i = 0, n = a.length; i < n; i++) {\n      if (!isEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  } else {\n    return a === b;\n  }\n}\n\nfunction getAllKeys(value, keys) {\n  if (!isObject(value)) {\n    return keys;\n  }\n  for (var key in value) {\n    keys.push(key);\n    getAllKeys(value[key], keys);\n  }\n  return keys;\n}\n\nfunction isExactObject(value) {\n  const allKeysHash = getAllKeys(value, []).join(\",\");\n  return allKeysHash.search(/[$.]/) === -1;\n}\n\n/**\n */\n\nfunction createRootValidator(query, options) {\n  var validator = parse(options)(query);\n  if (options && options.select) {\n    validator = {\n      options: validator,\n      validate: function(validateOptions, value, key, valueOwner) {\n        return validate(\n          validateOptions,\n          value && options.select(value),\n          key,\n          valueOwner\n        );\n      }\n    };\n  }\n  return validator;\n}\n\n/**\n */\n\nexport default function sift(query, options) {\n  options = Object.assign({ compare, comparable }, options);\n  var validator = createRootValidator(query, options);\n  return function(value, key, valueOwner) {\n    return validate(validator, value, key, valueOwner);\n  };\n}\n\n/**\n */\n\nexport function compare(a, b) {\n  if (isEqual(a, b)) return 0;\n  if (typeof a === typeof b) {\n    if (a > b) {\n      return 1;\n    }\n    if (a < b) {\n      return -1;\n    }\n  }\n}\n\n/**\n */\n\nexport function comparable(value) {\n  if (value instanceof Date) {\n    return value.getTime();\n  } else if (isArray(value)) {\n    return value.map(comparable);\n  } else if (value && typeof value.toJSON === \"function\") {\n    return value.toJSON();\n  } else {\n    return value;\n  }\n}\n"],"sourceRoot":""}